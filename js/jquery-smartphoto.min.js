!function t(e,a,o){function i(r,s){if(!a[r]){if(!e[r]){var h="function"==typeof require&&require;if(!s&&h)return h(r,!0);if(n)return n(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var l=a[r]={exports:{}};e[r][0].call(l.exports,function(t){var a=e[r][1][t];return i(a?a:t)},l,l.exports,t,e,a,o)}return a[r].exports}for(var n="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,a){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),n=t("morphdom"),r=t("delegate"),s=[],h="input paste copy click change keydown keyup contextmenu mouseup mousedown mousemove touchstart touchend touchmove compositionstart compositionend",d=h.replace(/([a-z]+)/g,"[data-action-$1],")+"[data-action]";Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e=Object(this),a=e.length>>>0,o=arguments[1],i=void 0,n=0;a>n;n++)if(i=e[n],t.call(o,i,n,e))return i;return void 0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),a=e.length;--a>=0&&e.item(a)!==this;);return a>-1});var l=function(t){return document.querySelector(t)},c=function(t){for(var e=0,a=s.length;a>e;e++)for(var o=s[e],i=o.templates,n=0,r=i.length;r>n;n++)if(i[n]==t)return o;return null},u=function(t,e){if("function"==typeof t.closest)return t.closest(e)||null;for(;t;){if(t.matches(e))return t;t=t.parentElement}return null},p=function(t,e,a,o){var i=a.split(" ");i.forEach(function(a){r(t,e,a,o)})};"undefined"!=typeof document&&(p(document,"[data-bind]","input change click",function(t){var e=t.delegateTarget,a=e.getAttribute("data-bind"),o=e.getAttribute("href"),i=u(e,"[data-id]").getAttribute("data-id"),n=e.value;if(o&&(n=n.replace("#","")),i){var r=c(i);"radio"===e.getAttribute("type")||("checkbox"===e.getAttribute("type")?!function(){var t=[],e=document.querySelectorAll('[data-bind="'+a+'"]');[].forEach.call(e,function(e){e.checked&&t.push(e.value)})}():r.updateDataByString(a,n))}}),p(document,d,h,function(t){var e=t.delegateTarget;if(!("click"===t.type&&"select"===e.tagName||"input"===t.type&&"button"===e.getAttribute("type"))){var a=h.split(" "),o="action";a.forEach(function(a){e.getAttribute("data-action-"+a)&&t.type===a&&(o+="-"+a)});var i=e.getAttribute("data-"+o);if(i){var n=i.replace(/\(.*?\);?/,""),r=i.replace(/(.*?)\((.*?)\);?/,"$2"),s=r.split(","),d=u(e,"[data-id]").getAttribute("data-id");if(d){var l=c(d);l.e=t,l.method&&l.method[n]?l.method[n].apply(l,s):l[n]&&l[n].apply(l,s)}}}}));var f=function(){function t(e){o(this,t),this.atemplate=[],s.push(this);for(var a in e)this[a]=e[a];this.data||(this.data={}),this.templates||(this.templates=[]);for(var i=this.templates,n=i.length,r=0,h=n;h>r;r++){var d=this.templates[r],c=l("#"+d).innerHTML;this.atemplate.push({id:d,html:c})}this.setId()}return i(t,[{key:"addTemplate",value:function(t,e){this.atemplate.push({id:t,html:e}),this.templates.push(t)}},{key:"loadHtml",value:function(){var t=this.templates,e=[];return t.forEach(function(t){var a=new $.Deferred;e.push(a);var o=l("#"+t).getAttribute("src");$.ajax({url:o,type:"GET",dataType:"text"}).success(function(e){l("#"+t).innerHTML=e,a.resolve()})}),$.when.apply($,e)}},{key:"getData",value:function(){return JSON.parse(JSON.stringify(this.data))}},{key:"saveData",value:function(t){var e=JSON.stringify(this.data);localStorage.setItem(t,e)}},{key:"setData",value:function(t){for(var e in t)"function"!=typeof t[e]&&(this.data[e]=t[e])}},{key:"loadData",value:function(t){var e=JSON.parse(localStorage.getItem(t));if(e)for(var a in e)"function"!=typeof e[a]&&(this.data[a]=e[a])}},{key:"getRand",value:function(t,e){return~~(Math.random()*(e-t+1))+t}},{key:"getRandText",value:function(t){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=a.length,i=0;t>i;i++)e+=a.charAt(Math.floor(this.getRand(0,o)));return e}},{key:"setId",value:function(){for(var e=void 0,a=(t.ids,!1);;){e=this.getRandText(10);for(var o=0,i=t.ids;i>o;o++)t.ids[o]===e&&(a=!0);if(a===!1)break}this.data.aTemplate_id=e}},{key:"getDataFromObj",value:function(t,e){t=t.replace(/\[([a-zA-Z0-9._-]+)\]/g,".$1"),t=t.replace(/^\./,"");for(var a=t.split(".");a.length;){var o=a.shift();if(!(o in e))return;e=e[o]}return e}},{key:"getDataByString",value:function(t){var e=this.data;return this.getDataFromObj(t,e)}},{key:"updateDataByString",value:function(t,e){for(var a=this.data,o=t.split(".");o.length>1;)a=a[o.shift()];a[o.shift()]=e}},{key:"removeDataByString",value:function(t){for(var e=this.data,a=t.split(".");a.length>1;)e=e[a.shift()];var o=a.shift();o.match(/^\d+$/)?e.splice(Number(o),1):delete e[o]}},{key:"resolveBlock",value:function(t,e,a){var o=this,i=t.match(/<!-- BEGIN ([a-zA-Z0-9._-]+):touch#([a-zA-Z0-9._-]+) -->/g),n=t.match(/<!-- BEGIN ([a-zA-Z0-9._-]+):touchnot#([a-zA-Z0-9._-]+) -->/g),r=t.match(/<!-- BEGIN ([a-zA-Z0-9._-]+):exist -->/g),s=t.match(/<!-- BEGIN ([a-zA-Z0-9._-]+):empty -->/g);if(i)for(var h=0,d=i.length;d>h;h++){var l=i[h];l=l.replace(/([a-zA-Z0-9._-]+):touch#([a-zA-Z0-9._-]+)/,"($1):touch#($2)");var c=l.replace(/BEGIN/,"END"),u=new RegExp(l+"(([\\n\\r\\t]|.)*?)"+c,"g");t=t.replace(u,function(t,a,i,n){var r="function"==typeof e[a]?e[a].apply(o):o.getDataFromObj(a,e);return r==i?n:""})}if(n)for(var p=0,f=n.length;f>p;p++){var m=n[p];m=m.replace(/([a-zA-Z0-9._-]+):touchnot#([a-zA-Z0-9._-]+)/,"($1):touchnot#($2)");var v=m.replace(/BEGIN/,"END"),g=new RegExp(m+"(([\\n\\r\\t]|.)*?)"+v,"g");t=t.replace(g,function(t,a,i,n){var r="function"==typeof e[a]?e[a].apply(o):o.getDataFromObj(a,e);return r!=i?n:""})}if(r)for(var y=0,w=r.length;w>y;y++){var x=r[y];x=x.replace(/([a-zA-Z0-9._-]+):exist/,"($1):exist");var P=x.replace(/BEGIN/,"END"),E=new RegExp(x+"(([\\n\\r\\t]|.)*?)"+P,"g");t=t.replace(E,function(t,a,i){var n="function"==typeof e[a]?e[a].apply(o):o.getDataFromObj(a,e);return n||0===n?i:""})}if(s)for(var b=0,S=s.length;S>b;b++){var N=s[b];N=N.replace(/([a-zA-Z0-9._-]+):empty/,"($1):empty");var _=N.replace(/BEGIN/,"END"),I=new RegExp(N+"(([\\n\\r\\t]|.)*?)"+_,"g");t=t.replace(I,function(t,a,i){var n="function"==typeof e[a]?e[a].apply(o):o.getDataFromObj(a,e);return n||0===n?"":i})}return t=t.replace(/{([a-zA-Z0-9._-]+)}(\[([a-zA-Z0-9._-]+)\])*/g,function(t,i,n,r){var s=void 0;if("i"==i)s=a;else{if(!e[i]&&0!==e[i])return r&&o.convert&&o.convert[r]?o.convert[r].call(o,""):"";s="function"==typeof e[i]?e[i].apply(o):e[i]}return r&&o.convert&&o.convert[r]?o.convert[r].call(o,s):s})}},{key:"resolveAbsBlock",value:function(t){var e=this;return t=t.replace(/{(.*?)}/g,function(t,a){var o=e.getDataByString(a);return"undefined"!=typeof o?"function"==typeof o?o.apply(e):o:t})}},{key:"resolveInclude",value:function(t){var e=/<!-- #include id="(.*?)" -->/g;return t=t.replace(e,function(t,e){return l("#"+e).innerHTML})}},{key:"resolveWith",value:function(t){var e=/<!-- BEGIN ([a-zA-Z0-9._-]+):with -->(([\n\r\t]|.)*?)<!-- END ([a-zA-Z0-9._-]+):with -->/g;return t=t.replace(e,function(t,e,a){return t=t.replace(/data\-bind=['"](.*?)['"]/g,"data-bind='"+e+".$1'")})}},{key:"resolveLoop",value:function(t){var e=/<!-- BEGIN (.+?):loop -->(([\n\r\t]|.)*?)<!-- END (.+?):loop -->/g,a=this;return t=t.replace(e,function(t,e,o){var i=a.getDataByString(e),n=[];n="function"==typeof i?i.apply(a):i;var r="";if(n instanceof Array)for(var s=0,h=n.length;h>s;s++)r+=a.resolveBlock(o,n[s],s);return r=r.replace(/\\([^\\])/g,"$1")})}},{key:"removeData",value:function(t){var e=this.data;for(var a in e)for(var o=0,i=t.length;i>o;o++)a===t[o]&&delete e[a];return this}},{key:"hasLoop",value:function(t){var e=/<!-- BEGIN (.+?):loop -->(([\n\r\t]|.)*?)<!-- END (.+?):loop -->/g;return t.match(e)?!0:!1}},{key:"getHtml",value:function(t,e){var a=this.atemplate.find(function(e){return e.id===t}),o="";if(a&&a.html&&(o=a.html),e&&(o=t),!o)return"";var i=this.data;for(o=this.resolveInclude(o),o=this.resolveWith(o);this.hasLoop(o);)o=this.resolveLoop(o);return o=this.resolveBlock(o,i),o=o.replace(/\\([^\\])/g,"$1"),o=this.resolveAbsBlock(o),o.replace(/^([\t ])*\n/gm,"")}},{key:"update",value:function(t,e){var a=(this.getHtml(),this.templates),o=t||"html";this.beforeUpdated&&this.beforeUpdated();for(var i=0,r=a.length;r>i;i++){var s=a[i],h="#"+s,d=this.getHtml(s),c=l("[data-id='"+s+"']");if((!e||e==s)&&(c?"text"===o?c.innerText=d:n(c,"<div data-id='"+s+"'>"+d+"</div>"):(l(h).insertAdjacentHTML("afterend",'<div data-id="'+s+'"></div>'),"text"===o?l("[data-id='"+s+"']").innerText=d:l("[data-id='"+s+"']").innerHTML=d),e))break}return this.updateBindingData(e),this.onUpdated&&this.onUpdated(e),this}},{key:"updateBindingData",value:function(t){for(var e=this,a=this.templates,o=0,i=a.length;i>o;o++){var n=a[o];if(!t||t==n){var r=l("[data-id='"+n+"']"),s=r.querySelectorAll("[data-bind]");if([].forEach.call(s,function(t){var a=e.getDataByString(t.getAttribute("data-bind"));"checkbox"===t.getAttribute("type")||"radio"===t.getAttribute("type")?a==t.value&&(t.checked=!0):t.value=a}),t)break}}return this}},{key:"applyMethod",value:function(t){var e=[].splice.call(arguments,0);return e.shift(),this.method[t].apply(this,e)}},{key:"getComputedProp",value:function(t){return this.data[t].apply(this)}},{key:"remove",value:function(t){for(var e=this.data,a=t.split(".");a.length>1;)e=e[a.shift()];var o=a.shift();return o.match(/^\d+$/)?e.splice(Number(o),1):delete e[o],this}}]),t}();e.exports=f},{delegate:3,morphdom:5}],2:[function(t,e,a){function o(t,e){for(;t&&t.nodeType!==i;){if(t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=o},{}],3:[function(t,e,a){function o(t,e,a,o,n){var r=i.apply(this,arguments);return t.addEventListener(a,r,n),{destroy:function(){t.removeEventListener(a,r,n)}}}function i(t,e,a,o){return function(a){a.delegateTarget=n(a.target,e),a.delegateTarget&&o.call(t,a)}}var n=t("./closest");e.exports=o},{"./closest":2}],4:[function(t,e,a){"use strict";var o=function(){function t(){this.keys={},this.register_list={},this.state={},this.statistic={},this.specialKeyString={altKey:"Alt",ctrlKey:"Control",metaKey:"Meta",shiftKey:"Shift"}}t.prototype.listen=function(t,e){var a=this.option,o=document;a.element&&"function"==typeof a.element.addEventListener&&(o=a.element),o.addEventListener("keydown",function(e){this.keydown(e,t)}.bind(this),!1),o.addEventListener("keyup",function(t){this.keyup(t,e)}.bind(this),!1)},t.prototype.unlisten=function(){var t=this.option,e=document;t.element&&"function"==typeof t.element.removeEventListener&&(e=t.element),e.removeEventListener("keydown",function(){}),e.removeEventListener("keyup",function(){})},t.prototype.test=function(t){return this.testRegisters(t)},t.prototype.testRegisters=function(t){for(var e=this.register_list,a=Object.getOwnPropertySymbols(e),o=this.testKeys.bind(this),i={},n=0,r=a.length;r>n;n++){var s=a[n],h=e[s],d=h[0],l=h[1];if(o(d))return l&&"function"==typeof l&&(t.clearKeys=this.clearKeys.bind(this),l(t)),i[s]=!0,i}return i},t.prototype.testKeys=function(t){for(var e=[],a=!1,o=0,i=t.length;i>o;o++){var n=t[o],r=Object.keys(this.keys),s=[],h=0;if(r.forEach(function(t,e){this.keys[t]&&s.push(t)}.bind(this)),this.option.DEBUG===!0){var d=s.map(function(t,e){return" "===t?"Space":t}).join(" ");console.log("["+Date.now()+"] You hit key: %c"+d,"color: #ea4335; font-size: 16px")}if(s.length!==n.length)h=!1;else{for(var l=0,c=n.length;c>l;l++)if(s.indexOf(n[l])<0){h=!1;break}l===n.length&&h!==!1&&(h=!0)}e.push(h)}return e.forEach(function(t,e){t===!0&&(a=!0)}),a},t.prototype.keydown=function(t,e){var a=t.key,o={},i=!0;Array.prototype.map;return this.keys[a]="keydown"===t.type,o=this.test(t),Object.keys(o).forEach(function(t,e){o[t]===!0&&(i=!1)}),this.state=o,i||(t.preventDefault(),t.stopPropagation()),this.collect(t.key,t.type,t.timeStamp),"function"==typeof e&&e(t),i},t.prototype.keyup=function(t,e){var a=t.key;return this.keys[a]=!1,this.collect(t.key,t.type,t.timeStamp),"function"==typeof e&&e(t),!0},t.prototype.collect=function(t,e,a){var o=this.statistic[t],i=window.CustomEvent?new CustomEvent("test").timeStamp:document.createEvent("KeyboardEvent").timeStamp;"undefined"==typeof o&&(o=this.statistic[t]={count:0,total:0,average:0}),"keydown"===e?o.downTimeStamp=a||i:"keyup"===e&&(o.count=o.count+1,o.upTimeStamp=a||i,o.total=o.upTimeStamp-o.downTimeStamp+o.total,o.total=+o.total.toFixed(2)||0,o.average=o.total/o.count)},t.prototype.register=function(t,e){if("string"!=typeof t)throw new Error("[from keyboard-js] Please input a register name.");var a;if(a="undefined"!=typeof Symbol?Symbol["for"](t):t,this.register_list[a])throw new Error("[from keyboard-js] The Register["+t+"] has existed!");var o=Array.prototype.slice.call(arguments,2);o[0]instanceof Array||(o=[o]),this.register_list[a]=[o,e]},t.prototype.clearRegister=function(t){delete this.register_list[t]},t.prototype.clearRegisterAll=function(){this.register_list={}},t.prototype.clearKeys=function(){this.keys={}};var e=new t,a={start:function(t,a){e.listen(t,a)},end:function(){e.unlisten(),e.clearRegisterAll(),e.clearKeys()},register:function(){e.register.apply(e,arguments)},unregister:function(){e.clearRegister.apply(e,arguments)},getStatistic:function(){return e.statistic},__keydown:function(){e.keydown.apply(e,arguments)},__keyup:function(){e.keyup.apply(e,arguments)}};return function(t){return e.option=t||{},"object"==typeof window&&window.addEventListener("focus",function(){e.keys={}},!1),a}}();if("undefined"!=typeof a)a.Keyboard=o;else if("function"==typeof define)define("Keyboard",[],function(){return o});else{if(void 0!==window.Keyboard)throw new Error("Library Keyboard has existed! Loaded failed.");window.Keyboard=o}},{}],5:[function(t,e,a){"use strict";function o(t){!u&&m.createRange&&(u=m.createRange(),u.selectNode(m.body));var e;return u&&u.createContextualFragment?e=u.createContextualFragment(t):(e=m.createElement("body"),e.innerHTML=t),e.childNodes[0]}function i(t,e){var a=t.nodeName,o=e.nodeName;return a===o?!0:e.actualize&&a.charCodeAt(0)<91&&o.charCodeAt(0)>90?a===o.toUpperCase():!1}function n(t,e){return e&&e!==f?m.createElementNS(e,t):m.createElement(t)}function r(t,e){for(var a=t.firstChild;a;){var o=a.nextSibling;e.appendChild(a),a=o}return e}function s(t,e){var a,o,i,n,r,s,h=e.attributes;for(a=h.length-1;a>=0;--a)o=h[a],i=o.name,n=o.namespaceURI,r=o.value,n?(i=o.localName||i,s=t.getAttributeNS(n,i),s!==r&&t.setAttributeNS(n,i,r)):(s=t.getAttribute(i),s!==r&&t.setAttribute(i,r));for(h=t.attributes,a=h.length-1;a>=0;--a)o=h[a],o.specified!==!1&&(i=o.name,n=o.namespaceURI,n?(i=o.localName||i,g(e,n,i)||t.removeAttributeNS(n,i)):g(e,null,i)||t.removeAttribute(i))}function h(t,e,a){t[a]!==e[a]&&(t[a]=e[a],t[a]?t.setAttribute(a,""):t.removeAttribute(a,""))}function d(){}function l(t){return t.id}function c(t){return function(e,a,s){function h(t){E?E.push(t):E=[t]}function c(t,e){if(t.nodeType===w)for(var a=t.firstChild;a;){var o=void 0;e&&(o=b(a))?h(o):(A(a),a.firstChild&&c(a,e)),a=a.nextSibling}}function u(t,e,a){k(t)!==!1&&(e&&e.removeChild(t),A(t),c(t,a))}function p(t){if(t.nodeType===w)for(var e=t.firstChild;e;){var a=b(e);a&&(C[a]=e),p(e),e=e.nextSibling}}function f(t){N(t);for(var e=t.firstChild;e;){var a=e.nextSibling,o=b(e);if(o){var n=C[o];n&&i(e,n)&&(e.parentNode.replaceChild(n,e),v(n,e))}f(e),e=a}}function v(o,n,r){var s,d=b(n);if(d&&delete C[d],!a.isSameNode||!a.isSameNode(e)){if(!r){if(_(o,n)===!1)return;if(t(o,n),I(o),D(o,n)===!1)return}if("TEXTAREA"!==o.nodeName){var l,c,p,g,E=n.firstChild,N=o.firstChild;t:for(;E;){for(p=E.nextSibling,l=b(E);N;){if(c=N.nextSibling,E.isSameNode&&E.isSameNode(N)){E=p,N=c;continue t}s=b(N);var k=N.nodeType,A=void 0;if(k===E.nodeType&&(k===w?(l?l!==s&&((g=C[l])?N.nextSibling===g?A=!1:(o.insertBefore(g,N),c=N.nextSibling,s?h(s):u(N,o,!0),N=g):A=!1):s&&(A=!1),A=A!==!1&&i(N,E),A&&v(N,E)):(k===x||k==P)&&(A=!0,N.nodeValue=E.nodeValue)),A){E=p,N=c;continue t}s?h(s):u(N,o,!0),N=c}if(l&&(g=C[l])&&i(g,E))o.appendChild(g),v(g,E);else{var B=S(E);B!==!1&&(B&&(E=B),E.actualize&&(E=E.actualize(o.ownerDocument||m)),o.appendChild(E),f(E))}E=p,N=c}for(;N;)c=N.nextSibling,(s=b(N))?h(s):u(N,o,!0),N=c}var z=y[o.nodeName];z&&z(o,n)}}if(s||(s={}),"string"==typeof a)if("#document"===e.nodeName||"HTML"===e.nodeName){var g=a;a=m.createElement("html"),a.innerHTML=g}else a=o(a);var E,b=s.getNodeKey||l,S=s.onBeforeNodeAdded||d,N=s.onNodeAdded||d,_=s.onBeforeElUpdated||d,I=s.onElUpdated||d,k=s.onBeforeNodeDiscarded||d,A=s.onNodeDiscarded||d,D=s.onBeforeElChildrenUpdated||d,B=s.childrenOnly===!0,C={};p(e);var z=e,T=z.nodeType,G=a.nodeType;if(!B)if(T===w)G===w?i(e,a)||(A(e),z=r(e,n(a.nodeName,a.namespaceURI))):z=a;else if(T===x||T===P){if(G===T)return z.nodeValue=a.nodeValue,z;z=a}if(z===a)A(e);else if(v(z,a,B),E)for(var O=0,L=E.length;L>O;O++){var M=C[E[O]];M&&u(M,M.parentNode,!1)}return!B&&z!==e&&e.parentNode&&(z.actualize&&(z=z.actualize(e.ownerDocument||m)),e.parentNode.replaceChild(z,e)),z}}var u,p,f="http://www.w3.org/1999/xhtml",m="undefined"==typeof document?void 0:document,v=m?m.body||m.createElement("div"):{};p=v.hasAttributeNS?function(t,e,a){return t.hasAttributeNS(e,a)}:v.hasAttribute?function(t,e,a){return t.hasAttribute(a)}:function(t,e,a){return null!=t.getAttributeNode(e,a)};var g=p,y={OPTION:function(t,e){h(t,e,"selected")},INPUT:function(t,e){h(t,e,"checked"),h(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),g(e,null,"value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var a=e.value;if(t.value!==a&&(t.value=a),t.firstChild){if(""===a&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=a}},SELECT:function(t,e){if(!g(e,null,"multiple")){for(var a=-1,o=0,i=e.firstChild;i;){var n=i.nodeName;if(n&&"OPTION"===n.toUpperCase()){if(g(i,null,"selected")){a=o;break}o++}i=i.nextSibling}t.selectedIndex=o}}},w=1,x=3,P=8,E=c(s);e.exports=E},{}],6:[function(t,e,a){"use strict";var o=t("../index"),i=function(t){t.fn.smartPhoto=function(t){return"strings"==typeof t||new o(this.selector,t),this}};if("function"==typeof define&&define.amd)define(["jquery"],i);else{var n=window.jQuery?window.jQuery:window.$;"undefined"!=typeof n&&i(n)}e.exports=i},{"../index":8}],7:[function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),h=t("a-template"),d=o(h),l='<div class="\\{classNames.smartPhoto\\}"<!-- BEGIN hide:exist --> style="display:none;"<!-- END hide:exist -->>\n	<div class="\\{classNames.smartPhotoBody\\}">\n		<div class="\\{classNames.smartPhotoInner\\}">\n			   <div class="\\{classNames.smartPhotoHeader\\}">\n					<span class="\\{classNames.smartPhotoCount\\}">{currentIndex}[increment]/{total}</span>\n					<span class="\\{classNames.smartPhotoCaption\\}"><!-- BEGIN groupItems:loop --><!-- \\BEGIN currentIndex:touch#{index} -->{caption}<!-- \\END currentIndex:touch#{index} --><!-- END groupItems:loop --></span>\n					<button class="\\{classNames.smartPhotoDismiss\\}" data-action-click="hidePhoto()"></button>\n				</div>\n				<div class="\\{classNames.smartPhotoContent\\}"<!-- BEGIN isSmartPhone:exist --> data-action-touchstart="beforeDrag" data-action-touchmove="onDrag" data-action-touchend="afterDrag(false)"<!-- END isSmartPhone:exist -->>\n				</div>\n				<ul style="transform:translate({translateX}px,{translateY}px);" class="\\{classNames.smartPhotoList\\}<!-- BEGIN onMoveClass:exist --> \\{classNames.smartPhotoListOnMove\\}<!-- END onMoveClass:exist -->">\n					<!-- BEGIN groupItems:loop -->\n					<li style="transform:translate({translateX}px,{translateY}px);" class="<!-- \\BEGIN currentIndex:touch#{index} -->current<!-- \\END currentIndex:touch#{index} -->">\n						<!-- BEGIN loaded:exist -->\n						<div style="transform:translate({x}px,{y}px) scale({scale});" class="\\\\{classNames.smartPhotoImgWrap\\\\}"<!-- \\BEGIN isSmartPhone:empty --> data-action-mousemove="onDrag" data-action-mousedown="beforeDrag" data-action-mouseup="afterDrag"<!-- \\END isSmartPhone:empty --><!-- \\BEGIN isSmartPhone:exist --> data-action-touchstart="beforeDrag" data-action-touchmove="onDrag" data-action-touchend="afterDrag"<!-- \\END isSmartPhone:exist -->>\n							<img style="<!-- \\BEGIN currentIndex:touch#{index} -->transform:translate(\\{photoPosX\\}[virtualPos]px,\\{photoPosY\\}[virtualPos]px) scale(\\{scaleSize\\});<!-- \\END currentIndex:touch#{index} -->" src="{src}" class="\\\\{classNames.smartPhotoImg\\\\}<!-- \\BEGIN scale:exist -->  \\\\{classNames.smartPhotoImgOnMove\\\\}<!-- \\END scale:exist --><!-- \\BEGIN elastic:exist --> \\\\{classNames.smartPhotoImgElasticMove\\\\}<!-- \\END elastic:exist --><!-- \\BEGIN appear:exist --> active<!-- \\END appear:exist -->" ondragstart="return false;">\n						</div>\n						<!-- END loaded:exist -->\n						<!-- BEGIN loaded:empty -->\n						<div class="\\\\{classNames.smartPhotoLoaderWrap\\\\}">\n							<span class="\\\\{classNames.smartPhotoLoader\\\\}"></span>\n						</div>\n						<!-- END loaded:empty -->\n					</li>\n					<!-- END groupItems:loop -->\n				</ul>\n				<!-- BEGIN arrows:exist -->\n				<ul class="\\{classNames.smartPhotoArrows\\}<!-- BEGIN hideUi:exist --> hide<!-- END hideUi:exist -->">\n					<li class="\\{classNames.smartPhotoArrowLeft\\}<!-- BEGIN showPrevArrow:exist --> show<!-- END showPrevArrow:exist -->" data-action-click="gotoSlide({prev})"></li>\n					<li class="\\{classNames.smartPhotoArrowRight\\}<!-- BEGIN showNextArrow:exist --> show<!-- END showNextArrow:exist -->" data-action-click="gotoSlide({next})"></li>\n				</ul>\n				<!-- END arrows:exist -->\n				<!-- BEGIN nav:exist -->\n				<nav class="\\{classNames.smartPhotoNav\\}<!-- BEGIN hideUi:exist --> hide<!-- END hideUi:exist -->">\n					<ul >\n						<!-- BEGIN groupItems:loop -->\n						<li data-action-click="gotoSlide({index})" class="<!-- \\BEGIN currentIndex:touch#{index} -->current<!-- \\END currentIndex:touch#{index} -->" style="background-image:url({src});"></li>\n						<!-- END groupItems:loop -->\n					</ul>\n				</nav>\n				<!-- END nav:exist -->\n		</div>\n		<!-- BEGIN appearEffect:exist -->\n		<img src=\\{appearEffect.img\\}\n		class="\\{classNames.smartPhotoImgClone\\}"\n		style="width:\\{appearEffect.width\\}px;height:\\{appearEffect.height\\}px;transform:translate(\\{appearEffect.left\\}px,\\{appearEffect.top\\}px) scale(1)" />\n		<!-- END appearEffect:exist -->\n	</div>\n</div>\n',c=t("../lib/util"),u=t("keyboard-js").Keyboard,p={classNames:{smartPhoto:"smartphoto",smartPhotoClose:"smartphoto-close",smartPhotoBody:"smartphoto-body",smartPhotoInner:"smartphoto-inner",smartPhotoContent:"smartphoto-content",smartPhotoImg:"smartphoto-img",smartPhotoImgOnMove:"smartphoto-img-onmove",smartPhotoImgElasticMove:"smartphoto-img-elasticmove",smartPhotoImgWrap:"smartphoto-img-wrap",smartPhotoArrows:"smartphoto-arrows",smartPhotoNav:"smartphoto-nav",smartPhotoArrowRight:"smartphoto-arrow-right",smartPhotoArrowLeft:"smartphoto-arrow-left",smartPhotoImgLeft:"smartphoto-img-left",smartPhotoImgRight:"smartphoto-img-right",smartPhotoList:"smartphoto-list",smartPhotoListOnMove:"smartphoto-list-onmove",smartPhotoHeader:"smartphoto-header",smartPhotoCount:"smartphoto-count",smartPhotoCaption:"smartphoto-caption",smartPhotoDismiss:"smartphoto-dismiss",smartPhotoLoader:"smartphoto-loader",smartPhotoLoaderWrap:"smartphoto-loader-wrap",smartPhotoImgClone:"smartphoto-img-clone"},arrows:!0,nav:!0,animationSpeed:300,swipeOffset:100,maxWidth:940,headerHeight:60,footerHeight:60,forceInterval:10,registance:.5,resizeStyle:"fill",verticalGravity:!1,useOrientationApi:!0},f=function(t){function e(t,a){i(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));o.data=c.extend({},p,a),o.data.currentIndex=0,o.data.hide=!0,o.data.group={},o.data.scaleSize=1,o.data.scale=!1,o.pos={x:0,y:0},o.data.photoPosX=0,o.data.photoPosY=0,o.convert={increment:o.increment,virtualPos:o.virtualPos},o.data.groupItems=o.groupItems,o.elements=document.querySelectorAll(t);var r=new Date;o.tapSecond=r.getTime(),o.onListMove=!1,o.id=o._getUniqId(),o.vx=0,o.vy=0,o.data.appearEffect=null,o.addTemplate(o.id,l),o.data.isSmartPhone=o._isSmartPhone();var s=document.querySelector("body");c.append(s,"<div data-id='"+o.id+"'></div>"),[].forEach.call(o.elements,function(t,e){o.addNewItem(t)});var h=o._getCurrentItemByHash();return h&&c.triggerEvent(h.element,"click"),o.data.isSmartPhone||o._setKeyboard(),o._getEachImageSize(),setInterval(function(){o._doAnim()},o.data.forceInterval),o.data.isSmartPhone||window.addEventListener("resize",function(t){o._resetTranslate(),o._setPosByCurrentIndex(),o._setSizeByScreen(),o.update()}),window.addEventListener("orientationchange",function(t){o._resetTranslate(),o._setPosByCurrentIndex(),o._setHashByCurrentIndex(),o._setSizeByScreen(),o.update()}),o.data.isSmartPhone&&o.data.useOrientationApi?(window.addEventListener("deviceorientation",function(t){var e=t.originalEvent||t,a=window.orientation;e&&e.gamma&&!o.data.appearEffect&&(o.isBeingZoomed||o.photoSwipable||o.data.elastic||!o.data.scale||(0===a?o._calcGravity(e.gamma,e.beta):90===a?o._calcGravity(e.beta,e.gamma):-90===a?o._calcGravity(-e.beta,-e.gamma):180===a&&o._calcGravity(-e.gamma,-e.beta)))}),o):n(o)}return r(e,t),s(e,[{key:"increment",value:function(t){return t+1}},{key:"virtualPos",value:function(t){t=parseInt(t);var e=this._getSelectedItem();return t/e.scale/this.data.scaleSize}},{key:"groupItems",value:function(){return this.data.group[this.data.currentGroup]}},{key:"_setKeyboard",value:function(){var t=this,e=new u;e.register("slideRight",function(){t.data.hide!==!0&&t.gotoSlide(t.data.next)},["ArrowRight"]),e.register("slideLeft",function(){t.data.hide!==!0&&t.gotoSlide(t.data.prev)},["ArrowLeft"]),e.register("hidePhoto",function(){t.data.hide!==!0&&t.hidePhoto()},["Escape"]),e.start()}},{key:"_getEachImageSize",value:function(){var t=[],e=this.data.group;for(var a in e)e.hasOwnProperty(a)&&e[a].forEach(function(e){var a=new Promise(function(t,a){var o=new Image;o.onload=function(){e.width=o.width,e.height=o.height,e.loaded=!0,t()},o.onerror=function(){t()},o.src=e.src});t.push(a)});return Promise.all(t)}},{key:"_resetTranslate",value:function(){var t=this.groupItems();t.forEach(function(t,e){t.translateX=window.innerWidth*e})}},{key:"addNewItem",value:function(t){var e=this,a=t.getAttribute("data-group")||"nogroup",o=this.data.group;"nogroup"===a&&t.setAttribute("data-group","nogroup"),o[a]||(o[a]=[]);var i=o[a].length,n={src:t.getAttribute("href"),caption:t.getAttribute("data-caption"),groupId:a,translateX:window.innerWidth*i,index:i,translateY:0,width:50,height:50,id:t.getAttribute("data-id")||i,loaded:!1,element:t};o[a].push(n),this.data.currentGroup=a;var r=t.getAttribute("data-id");r||t.setAttribute("data-id",i),t.setAttribute("data-index",i),t.addEventListener("click",function(a){a.preventDefault(),e.data.currentGroup=t.getAttribute("data-group"),e.data.currentIndex=parseInt(t.getAttribute("data-index")),e._setHashByCurrentIndex();var o=e._getSelectedItem();o.loaded?(e._initPhoto(),e.addAppearEffect(t),e.update()):e._loadItem(o).then(function(){e.data.appear=!0,e._initPhoto(),e.update()})})}},{key:"_initPhoto",value:function(){this.data.total=this.groupItems().length,this.data.hide=!1,this.data.photoPosX=0,this.data.photoPosY=0,this._setPosByCurrentIndex(),this._setSizeByScreen(),this.setArrow(),"fill"===this.data.resizeStyle&&this.data.isSmartPhone&&(this.data.scale=!0,this.data.hideUi=!0,this.data.scaleSize=this._getScaleBoarder())}},{key:"onUpdated",value:function(){var t=this;this.data.appearEffect&&this.data.appearEffect.once&&(this.data.appearEffect.once=!1,this.execEffect().then(function(){t.replaceEffectWithImg()}))}},{key:"execEffect",value:function(){var t=this.data.appearEffect,e=this.data.classNames,a=document.querySelector('[data-id="'+this.id+'"] .'+e.smartPhotoImgClone);return new Promise(function(e,o){setTimeout(function(){a.style.transition="all .3s ease-out",a.style.transform="translate("+t.afterX+"px, "+t.afterY+"px) scale("+t.scale+")",e()},30)})}},{key:"replaceEffectWithImg",value:function(){var t=this;this.data.classNames;setTimeout(function(){t.data.appearEffect=null,t.data.appear=!0,t.update()},300)}},{key:"addAppearEffect",value:function(t){var e=t.querySelector("img"),a=(e.cloneNode(!0),c.getViewPos(e)),o={},i=1;o.width=e.offsetWidth,o.height=e.offsetHeight,o.top=a.top,o.left=a.left,o.once=!0,o.img=e.getAttribute("src");var n=window.innerWidth,r=window.innerHeight,s=r-this.data.headerHeight-this.data.footerHeight;"fill"===this.data.resizeStyle&&this.data.isSmartPhone?i=e.offsetWidth>e.offsetHeight?r/e.offsetHeight:n/e.offsetWidth:(i=s/e.offsetHeight,i*e.offsetWidth>n&&(i=n/e.offsetWidth));var h=(i-1)/2*e.offsetWidth+(n-e.offsetWidth*i)/2,d=(i-1)/2*e.offsetHeight+(r-e.offsetHeight*i)/2;o.afterX=h,o.afterY=d,o.scale=i,this.data.appearEffect=o}},{key:"hidePhoto",value:function(){var t=this;this.data.hide=!0,this.data.appear=!1,this.data.appearEffect=null;var e=window.scrollX,a=window.scrollY;location.hash&&(location.hash=""),window.scroll(e,a),this._doHideEffect().then(function(){t.update()})}},{key:"_doHideEffect",value:function(){var t=this;return new Promise(function(e,a){var o=t.data.classNames,i=t._getElementByClass(o.smartPhoto),n=t._getElementByQuery(".current ."+o.smartPhotoImg),r=window.innerHeight,s=function h(){i.removeEventListener("transitionend",h,!0),e()};i.style.opacity=0,n.style.transform="translateY("+r+"px)",i.addEventListener("transitionend",s,!0)})}},{key:"_getElementByClass",value:function(t){return document.querySelector('[data-id="'+this.id+'"] .'+t)}},{key:"_getElementByQuery",value:function(t){return document.querySelector('[data-id="'+this.id+'"] '+t)}},{key:"_getTouchPos",value:function(t){var e=0,a=0;if("undefined"==typeof o)var o=this.e;return this._isTouched(o)?(e=o.originalEvent.touches[0].pageX,a=o.originalEvent.touches[0].pageY):this._isTouched(this.e)?(e=this.e.originalEvent.touches[0].pageX,a=this.e.originalEvent.touches[0].pageY):o.pageX&&(e=o.pageX,a=o.pageY),{x:e,y:a}}},{key:"_getGesturePos",value:function(t){var e=t.originalEvent.touches;return[{x:e[0].pageX,y:e[0].pageY},{x:e[1].pageX,y:e[1].pageY}]}},{key:"_setPosByCurrentIndex",value:function(){var t=this,e=this.groupItems(),a=-1*e[this.data.currentIndex].translateX;this.pos.x=a,setTimeout(function(){t.data.translateX=a,t.data.translateY=0,t._listUpdate()},1)}},{key:"_setHashByCurrentIndex",value:function(){
var t=window.scrollX,e=window.scrollY,a=this.groupItems(),o=a[this.data.currentIndex].id,i=this.data.currentGroup,n="group="+i+"&photo="+o;location.hash=n,window.scroll(t,e)}},{key:"_getCurrentItemByHash",value:function(){var t=this.data.group,e=location.hash.substr(1),a=c.parseQuery(e),o=null;for(var i in t)t.hasOwnProperty(i)&&t[i].forEach(function(t){a.group===t.groupId&&a.photo===t.id&&(o=t)});return o}},{key:"_loadItem",value:function(t){return new Promise(function(e,a){var o=new Image;o.onload=function(){t.width=o.width,t.height=o.height,t.loaded=!0,e()},o.onerror=function(){e()},o.src=t.src})}},{key:"_setSizeByScreen",value:function(){var t=window.innerWidth,e=window.innerHeight,a=this.data.headerHeight,o=this.data.footerHeight,i=e-(a+o),n=this.groupItems();n.forEach(function(a){a.scale=i/a.height,a.x=(a.scale-1)/2*a.width+(t-a.width*a.scale)/2,a.y=(a.scale-1)/2*a.height+(e-a.height*a.scale)/2,a.width*a.scale>t&&(a.scale=t/a.width,a.x=(a.scale-1)/2*a.width)})}},{key:"_slideList",value:function(){var t=this;this.data.onMoveClass=!0,this._setPosByCurrentIndex(),this._setHashByCurrentIndex(),this._setSizeByScreen(),setTimeout(function(){t.data.onMoveClass=!1,t.setArrow(),t.update()},200)}},{key:"gotoSlide",value:function(t){this.data.currentIndex=parseInt(t),this.data.currentIndex||(this.data.currentIndex=0),this._slideList()}},{key:"setArrow",value:function(){var t=this.groupItems(),e=t.length,a=this.data.currentIndex+1,o=this.data.currentIndex-1;this.data.showNextArrow=!1,this.data.showPrevArrow=!1,a!==e&&(this.data.next=a,this.data.showNextArrow=!0),-1!==o&&(this.data.prev=o,this.data.showPrevArrow=!0)}},{key:"beforeDrag",value:function(){if(this._isGestured(this.e))return void this.beforeGesture();if(this.data.scale)return void this.beforePhotoDrag();var t=this._getTouchPos(this.e);this.isSwipable=!0,this.dragStart=!0,this.firstPos=t,this.oldPos=t}},{key:"afterDrag",value:function(t){var e=this.groupItems(),a=new Date,o=a.getTime(),i=this.tapSecond-o,n=0,r=0;return this.isSwipable=!1,this.onListMove=!1,this.oldPos&&(n=this.oldPos.x-this.firstPos.x,r=this.oldPos.y-this.firstPos.y),this.isBeingZoomed?void this.afterGesture():this.data.scale?void this.afterPhotoDrag():c.isSmartPhone()||0!==n||0!==r?Math.abs(i)<=500&&0===n&&0===r?(this.e.preventDefault(),void this.zoomPhoto()):(this.tapSecond=o,"horizontal"===this.moveDir&&(n>=this.data.swipeOffset&&0!==this.data.currentIndex?this.data.currentIndex--:n<=-this.data.swipeOffset&&this.data.currentIndex!=e.length-1&&this.data.currentIndex++,this._slideList()),void("vertical"===this.moveDir&&(r>=this.data.swipeOffset?this.hidePhoto():(this.data.translateY=0,this._slideList())))):void this.zoomPhoto()}},{key:"onDrag",value:function(){if(this.e.preventDefault(),this._isGestured(this.e)&&this.onListMove===!1)return void this.onGesture();if(!this.isBeingZoomed){if(this.data.scale)return void this.onPhotoDrag();if(this.isSwipable){var t=this._getTouchPos(this.e),e=t.x-this.oldPos.x,a=t.y-this.firstPos.y;this.dragStart&&(this.dragStart=!1,Math.abs(e)>Math.abs(a)?this.moveDir="horizontal":this.moveDir="vertical"),"horizontal"===this.moveDir?(this.pos.x+=e,this.data.translateX=this.pos.x):this.data.translateY=a,this.onListMove=!0,this.oldPos=t,this._listUpdate()}}}},{key:"zoomPhoto",value:function(){var t=this;this.data.hideUi=!0,this.data.scaleSize=this._getScaleBoarder(),this.data.photoPosX=0,this.data.photoPosY=0,this._photoUpdate(),setTimeout(function(){t.data.scale=!0,t._photoUpdate()},300)}},{key:"zoomOutPhoto",value:function(){this.data.scaleSize=1,this.isBeingZoomed=!1,this.data.hideUi=!1,this.data.scale=!1,this.data.photoPosX=0,this.data.photoPosY=0,this._photoUpdate()}},{key:"beforePhotoDrag",value:function(){var t=this._getTouchPos(this.e);this.photoSwipable=!0,this.data.photoPosX||(this.data.photoPosX=0),this.data.photoPosY||(this.data.photoPosY=0),this.oldPhotoPos=t,this.firstPhotoPos=t}},{key:"onPhotoDrag",value:function(){if(this.photoSwipable){this.e.preventDefault();var t=this._getTouchPos(this.e),e=t.x-this.oldPhotoPos.x,a=t.y-this.oldPhotoPos.y,o=this._round(this.data.scaleSize*e,6),i=this._round(this.data.scaleSize*a,6);"number"==typeof o&&(this.data.photoPosX+=o,this.photoVX=o),"number"==typeof i&&(this.data.photoPosY+=i,this.photoVY=i),this.oldPhotoPos=t,this._photoUpdate()}}},{key:"afterPhotoDrag",value:function(){if(this.oldPhotoPos.x===this.firstPhotoPos.x&&this.photoSwipable)this.zoomOutPhoto();else{var t=this._getSelectedItem(),e=this._makeBound(t),a=0,o=0;this.data.photoPosX>e.maxX?a=-1:this.data.photoPosX<e.minX&&(a=1),this.data.photoPosY>e.maxY?o=-1:this.data.photoPosY<e.minY&&(o=1),0===a&&0===o?(this.vx=this.photoVX/5,this.vy=this.photoVY/5):this._registerElasticForce(a,o)}this.photoSwipable=!1}},{key:"beforeGesture",value:function(){var t=this._getGesturePos(this.e),e=this._getDistance(t[0],t[1]);this.isBeingZoomed=!0,this.oldDistance=e,this.data.scale=!0,this.e.preventDefault()}},{key:"onGesture",value:function(){var t=this._getGesturePos(this.e),e=this._getDistance(t[0],t[1]),a=(e-this.oldDistance)/100,o=this.data.scaleSize,i=this.data.photoPosX,n=this.data.photoPosY;this._getSelectedItem();this.data.scaleSize+=this._round(a,6),this.data.scaleSize<.2&&(this.data.scaleSize=.2),this.data.scaleSize<o&&(this.data.photoPosX=(1+this.data.scaleSize-o)*i,this.data.photoPosY=(1+this.data.scaleSize-o)*n),this.data.scaleSize<1||this.data.scaleSize>this._getScaleBoarder()?this.data.hideUi=!0:this.data.hideUi=!1,this.oldDistance=e,this.e.preventDefault(),this._photoUpdate()}},{key:"afterGesture",value:function(){this.isBeingZoomed=!1,this.data.scaleSize>this._getScaleBoarder()||(this.data.photoPosX=0,this.data.photoPosY=0,this.data.scale=!1,this.data.scaleSize=1,this.data.hideUi=!1,this._photoUpdate())}},{key:"_getForceAndTheta",value:function(t,e){return{force:Math.sqrt(t*t+e*e),theta:Math.atan2(e,t)}}},{key:"_getScaleBoarder",value:function(){var t=this._getSelectedItem();return c.isSmartPhone()?t.width>t.height?window.innerHeight/(t.height*t.scale):window.innerWidth/(t.width*t.scale):1/t.scale}},{key:"_makeBound",value:function(t){var e=t.width*t.scale*this.data.scaleSize,a=t.height*t.scale*this.data.scaleSize,o=void 0,i=void 0,n=void 0,r=void 0;return window.innerWidth>e?(n=(window.innerWidth-e)/2,o=-1*n):(n=(e-window.innerWidth)/2,o=-1*n),window.innerHeight>a?(r=(window.innerHeight-a)/2,i=-1*r):(r=(a-window.innerHeight)/2,i=-1*r),{minX:this._round(o,6)*this.data.scaleSize,minY:this._round(i,6)*this.data.scaleSize,maxX:this._round(n,6)*this.data.scaleSize,maxY:this._round(r,6)*this.data.scaleSize}}},{key:"_registerElasticForce",value:function(t,e){var a=this,o=this._getSelectedItem(),i=this._makeBound(o);this.data.elastic=!0,1===t?this.data.photoPosX=i.minX:-1===t&&(this.data.photoPosX=i.maxX),1===e?this.data.photoPosY=i.minY:-1===e&&(this.data.photoPosY=i.maxY),this._photoUpdate(),setTimeout(function(){a.data.elastic=!1,a._photoUpdate()},300)}},{key:"_getSelectedItem",value:function(){var t=this.data,e=t.currentIndex;return t.group[t.currentGroup][e]}},{key:"_getUniqId",value:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}},{key:"_getDistance",value:function(t,e){var a=t.x-e.x,o=t.y-e.y;return Math.sqrt(a*a+o*o)}},{key:"_round",value:function(t,e){var a=Math.pow(10,e);return t*=a,t=Math.round(t),t/=a}},{key:"_isTouched",value:function(t){return t&&t.originalEvent&&t.originalEvent.touches?!0:!1}},{key:"_isGestured",value:function(t){return t&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length>1?!0:!1}},{key:"_isSmartPhone",value:function(){var t=navigator.userAgent;return t.indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("ipod")>0||t.indexOf("Android")>0?!0:!1}},{key:"_calcGravity",value:function(t,e){(t>5||-5>t)&&(this.vx+=.05*t),this.data.verticalGravity!==!1&&(e>5||-5>e)&&(this.vy+=.05*e)}},{key:"_photoUpdate",value:function(){var t=this.data.classNames,e=this._getElementByQuery(".current"),a=e.querySelector("."+t.smartPhotoImg),o=this._getElementByQuery("."+t.smartPhotoNav),i=this._getElementByQuery("."+t.smartPhotoArrows),n=this.virtualPos(this.data.photoPosX),r=this.virtualPos(this.data.photoPosY),s=this.data.scaleSize,h="translate("+n+"px,"+r+"px) scale("+s+")";a.style.transform=h,this.data.scale?c.addClass(a,t.smartPhotoImgOnMove):c.removeClass(a,t.smartPhotoImgOnMove),this.data.elastic?c.addClass(a,t.smartPhotoImgElasticMove):c.removeClass(a,t.smartPhotoImgElasticMove),this.data.hideUi?(c.addClass(o,"hide"),c.addClass(i,"hide"),setTimeout(function(){c.addClass(o,"none"),c.addClass(i,"none")},100)):(c.removeClass(o,"none"),c.removeClass(i,"none"),setTimeout(function(){c.removeClass(o,"hide"),c.removeClass(i,"hide")},10))}},{key:"_listUpdate",value:function(){var t=this.data.classNames,e=this._getElementByQuery("."+t.smartPhotoList),a="translate("+this.data.translateX+"px,"+this.data.translateY+"px)";e.style.transform=a,this.data.onMoveClass?c.addClass(e,t.smartPhotoListOnMove):c.removeClass(e,t.smartPhotoListOnMove)}},{key:"_doAnim",value:function(){if(!(this.isBeingZoomed||this.isSwipable||this.photoSwipable||this.data.elastic)&&this.data.scale){this.data.photoPosX+=this.vx,this.data.photoPosY+=this.vy;var t=this._getSelectedItem(),e=this._makeBound(t);this.data.photoPosX<e.minX?(this.data.photoPosX=e.minX,this.vx*=-.2):this.data.photoPosX>e.maxX&&(this.data.photoPosX=e.maxX,this.vx*=-.2),this.data.photoPosY<e.minY?(this.data.photoPosY=e.minY,this.vy*=-.2):this.data.photoPosY>e.maxY&&(this.data.photoPosY=e.maxY,this.vy*=-.2);var a=this._getForceAndTheta(this.vx,this.vy),o=a.force,i=a.theta;o-=this.data.registance,Math.abs(o)<.5||(this.vx=Math.cos(i)*o,this.vy=Math.sin(i)*o,this._photoUpdate())}}}]),e}(d["default"]);e.exports=f},{"../lib/util":9,"a-template":1,"keyboard-js":4}],8:[function(t,e,a){"use strict";e.exports=t("./core/")},{"./core/":7}],9:[function(t,e,a){"use strict";function o(t){t=t||{};for(var e=1;e<arguments.length;e++){var a=arguments[e];if(a)for(var n in a)a.hasOwnProperty(n)&&("object"===i(a[n])?t[n]=o(t[n],a[n]):t[n]=a[n])}return t}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports.isSmartPhone=function(){var t=navigator.userAgent;return t.indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("ipod")>0||t.indexOf("Android")>0?!0:!1},e.exports.extend=o,e.exports.triggerEvent=function(t,e,a){var o=void 0;window.CustomEvent?o=new CustomEvent(e,{cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(e,!1,!1,a)),t.dispatchEvent(o)},e.exports.parseQuery=function(t){for(var e,a,o,i=t.split("&"),n={},r=0,s=i.length;s>r;r++)e=i[r].split("="),void 0!==e[0]&&(a=e[0],o=void 0!==e[1]?e.slice(1).join("="):a,n[a]=decodeURIComponent(o));return n},e.exports.getViewPos=function(t){return{left:t.getBoundingClientRect().left,top:t.getBoundingClientRect().top}},e.exports.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},e.exports.append=function(t,e){var a=new DOMParser,o=a.parseFromString(e,"text/html");t.appendChild(o.querySelector("body").childNodes[0])},e.exports.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},e.exports.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}},{}]},{},[6]);